angular.module('classApp',['ngRoute'])
    .config(function($routeProvider,$locationProvider){
        $routeProvider.when('/',{
            templateUrl:'pages/home.html'
        }).when('/reg',{
            templateUrl:'pages/reg.html',
            controller:'RegCtrl'
        }).when('/login',{
            templateUrl:'pages/login.html',
            controller:'LoginCtrl'
        }).when('/student',{
            templateUrl:'pages/student.html',
            controller:'StuCtrl'
        }).when('/exercise',{
            templateUrl:'pages/exercise.html',
            controller:'ExerCtrl'
        }).when('/detail',{
            templateUrl:'pages/detail.html',
            controller:'DetailCtrl'
        }).otherwise({
            redirectTo:'/'
        });
    }).run(function($rootScope,$location,$http){
        $http({
            url:'/users/validate',
            method:'GET'
        }).success(function(user){
            $rootScope.me = user;
            $location.path('/');
        }).error(function(data){
            $location.path('/login');
        });
    });